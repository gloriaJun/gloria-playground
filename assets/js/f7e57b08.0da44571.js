"use strict";(self.webpackChunkgloria_tilog_root=self.webpackChunkgloria_tilog_root||[]).push([[4713],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>g});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var o=a.createContext({}),p=function(e){var n=a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},c=function(e){var n=p(e.components);return a.createElement(o.Provider,{value:n},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,s=e.originalType,o=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=p(t),m=r,g=u["".concat(o,".").concat(m)]||u[m]||d[m]||s;return t?a.createElement(g,l(l({ref:n},c),{},{components:t})):a.createElement(g,l({ref:n},c))}));function g(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var s=t.length,l=new Array(s);l[0]=m;var i={};for(var o in n)hasOwnProperty.call(n,o)&&(i[o]=n[o]);i.originalType=e,i[u]="string"==typeof e?e:r,l[1]=i;for(var p=2;p<s;p++)l[p]=t[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},9241:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>g,frontMatter:()=>i,metadata:()=>p,toc:()=>u});var a=t(7462),r=t(3366),s=(t(7294),t(3905)),l=["components"],i={title:"[docusaurus] Configure lint",tags:["devlog","nx","lint","docusaurus"],date:"2023-05-01T21:03"},o=void 0,p={permalink:"/gloria-tilog/2023/05/01/side-project/docusaurus/lint",source:"@site/blog/side-project/docusaurus/2023-05-01-lint.mdx",title:"[docusaurus] Configure lint",description:"\uc774\ubc88\uc5d0\ub294 lint\uc640 cspeel \uadf8\ub9ac\uace0 husky \uc124\uc815\uc744 \uc801\uc6a9\ud558\uace0\uc790 \ud55c\ub2e4.",date:"2023-05-01T21:03:00.000Z",formattedDate:"May 1, 2023",tags:[{label:"devlog",permalink:"/gloria-tilog/tags/devlog"},{label:"nx",permalink:"/gloria-tilog/tags/nx"},{label:"lint",permalink:"/gloria-tilog/tags/lint"},{label:"docusaurus",permalink:"/gloria-tilog/tags/docusaurus"}],readingTime:5.825,hasTruncateMarker:!1,authors:[],frontMatter:{title:"[docusaurus] Configure lint",tags:["devlog","nx","lint","docusaurus"],date:"2023-05-01T21:03"},prevItem:{title:"[docusaurus] Configure docusaurus",permalink:"/gloria-tilog/2023/05/14/side-project/docusaurus/docusaurus"},nextItem:{title:"[docusaurus] Create Blog with NX and docusaurus",permalink:"/gloria-tilog/2023/04/30/side-project/docusaurus/init"}},c={authorsImageUrls:[]},u=[{value:"eslint",id:"eslint",level:2},{value:"cspell",id:"cspell",level:2},{value:"commitlint",id:"commitlint",level:2},{value:"lint-staged &amp; husky",id:"lint-staged--husky",level:2},{value:"References",id:"references",level:2}],d={toc:u},m="wrapper";function g(e){var n=e.components,t=(0,r.Z)(e,l);return(0,s.kt)(m,(0,a.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,s.kt)("p",null,"\uc774\ubc88\uc5d0\ub294 lint\uc640 cspeel \uadf8\ub9ac\uace0 husky \uc124\uc815\uc744 \uc801\uc6a9\ud558\uace0\uc790 \ud55c\ub2e4."),(0,s.kt)("h2",{id:"eslint"},"eslint"),(0,s.kt)("p",null,"\uae30\ubcf8\uc801\uc73c\ub85c \uc55e\uc5d0\uc11c \uc124\uc815\ud558\uba74\uc11c \uc801\uc6a9\uc774 \ub418\uc5b4\uc788\uc5b4\uc11c, \ud544\uc694\ud55c \ubd80\ubd84\ub9cc \ucd94\uac00\ub85c \ucee4\uc2a4\ud140\ud574\uc8fc\uc5c8\ub2e4.\n\ucd94\uac00\ub85c \uc124\uc815\ud558\uace0\uc790 \ud558\ub294 \ud50c\ub7ec\uadf8\uc778\ub4e4\uc744 \uc124\uce58\ud55c\ub2e4."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add -D eslint-plugin-prettier\n")),(0,s.kt)("p",null,"\uadf8\ub9ac\uace0 \ub2e4\uc74c\uacfc \uac19\uc774 \uc124\uc815 \ud30c\uc77c\uc5d0 parserOptions.project\uc640 \uc704\uc5d0\uc11c \uc124\uce58\ud55c \ud50c\ub7ec\uadf8\uc778\ub4e4\uc5d0 \ub300\ud55c \uc124\uc815\uc744 \ucd94\uac00\ud574\uc8fc\uc5c8\ub2e4."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-javascript"},"module.exports = {\n  root: true,\n  ignorePatterns: ['**/*'],\n  plugins: ['@nx'],\n  extends: ['plugin:prettier/recommended'],\n  rules: {\n    'prettier/prettier': ['error'],\n  },\n  overrides: [\n    {\n      files: ['*.ts', '*.tsx', '*.js', '*.jsx'],\n      rules: {\n        '@nx/enforce-module-boundaries': [\n          'error',\n          {\n            enforceBuildableLibDependency: true,\n            allow: [],\n            depConstraints: [\n              {\n                sourceTag: '*',\n                onlyDependOnLibsWithTags: ['*'],\n              },\n            ],\n          },\n        ],\n      },\n    },\n    {\n      files: ['*.ts', '*.tsx'],\n      extends: [\n        'plugin:@typescript-eslint/recommended',\n        'plugin:@typescript-eslint/recommended-requiring-type-checking',\n        'plugin:@nx/typescript',\n      ],\n      parserOptions: {\n        project: [\n          './tsconfig.base.json',\n          './lib/*/tsconfig.json',\n          './apps/doc/tsconfig.json',\n        ],\n      },\n      rules: {},\n    },\n    {\n      files: ['*.js', '*.jsx'],\n      extends: ['plugin:@nx/javascript'],\n      rules: {},\n    },\n    {\n      files: ['*.spec.ts', '*.spec.tsx', '*.spec.js', '*.spec.jsx'],\n      env: {\n        jest: true,\n      },\n      rules: {},\n    },\n  ],\n};\n")),(0,s.kt)("p",null,"\uadf8\ub9ac\uace0 ",(0,s.kt)("inlineCode",{parentName:"p"},"project.json")," \ud30c\uc77c\uc758 ",(0,s.kt)("strong",{parentName:"p"},"target")," \uc124\uc815\uc5d0 lint\uc640 type check\ub97c \uc704\ud574\uc11c \ub2e4\uc74c\uacfc \uac19\uc774 \uc124\uc815\uc744 \ucd94\uac00\ud558\uc600\ub2e4."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'"targets": {\n   "lint": {\n     "executor": "@nx/linter:eslint",\n     "outputs": ["{options.outputFile}"],\n     "options": {\n       "lintFilePatterns": ["apps/doc/**/*.{ts,tsx,js,jsx}"]\n     }\n   },\n    "type-check": {\n      "executor": "nx:run-commands",\n      "options": {\n        "commands": [\n          {\n            "command": "tsc --noEmit -p ./libs/ui/tsconfig.eslint.json"\n          }\n        ]\n      }\n    },\n ....(SKIP)\n},\n')),(0,s.kt)("p",null,"nx\uc5d0\uc11c \uae30\ubcf8\uc73c\ub85c \uc124\uc815\ub418\uc5b4\uc788\ub294 ",(0,s.kt)("inlineCode",{parentName:"p"},"tsconfig.json")," \ud30c\uc77c\uc5d0 \uc815\uc758\ub41c ",(0,s.kt)("strong",{parentName:"p"},"reference")," \uc124\uc815\uc73c\ub85c \uc778\ud574 type check\uac00 \uc758\ub3c4\ub41c\ub370\ub85c \ub3d9\uc791\ud558\uc9c0 \uc54a\uc544\uc11c ",(0,s.kt)("strong",{parentName:"p"},"tsconfig.eslint.json")," \ud30c\uc77c\uc744 \ub2e4\uc74c\uacfc \uac19\uc774 \ucd94\uac00\ud558\uc5ec \uc124\uc815\ud574\uc8fc\uc5c8\ub2e4."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'// tsconfig.eslint.json\n{\n  "compilerOptions": {\n    "jsx": "react-jsx",\n    "allowJs": false,\n    "esModuleInterop": false,\n    "allowSyntheticDefaultImports": true,\n    "strict": true,\n  },\n  "extends": "../../tsconfig.base.json"\n}\n\n// tsconfig.json\n{\n  "references": [\n    {\n      "path": "./tsconfig.lib.json"\n    },\n    {\n      "path": "./tsconfig.spec.json"\n    }\n  ],\n  "extends": "./tsconfig.eslint.json"\n}\n')),(0,s.kt)("p",null,"\uadf8\ub9ac\uace0 ",(0,s.kt)("strong",{parentName:"p"},"ui.tsx")," \ud30c\uc77c\uc5d0 \ub2e4\uc74c\uacfc \uac19\uc774 \uc77c\ubd80\ub7ec \ud0c0\uc785 \uc5d0\ub7ec\ub97c \uc720\ubc1c\uc2dc\ucf30\ub2e4."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-javascript"},"const a = 5;\na = 'ssss';\n")),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"package.json"),"\uc5d0 \ucd94\uac00\ud55c \ub9b0\ud2b8 \uccb4\ud06c \uba85\ub839\uc5b4\ub97c \uc2a4\ud06c\ub9bd\ud2b8\uc5d0 \uc815\uc758\ud574\uc8fc\uc5c8\ub2e4."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'"type-check": "nx type-check",\n"type-check:many": "nx run-many --target=type-check",\n"lint": "nx lint",\n"lint:many": "nx run-many --target=lint",\n"lint:all": "npm-run-all type-check:many lint:many",\n')),(0,s.kt)("p",null,"\ucd94\uac00\ud55c \uba85\ub839\uc5b4\ub97c \uc218\ud589\ud558\uba74 \ub2e4\uc74c\uacfc \uac19\uc774 \ud0c0\uc785\uccb4\ud06c\uc640 \ub9b0\ud2b8\uac00 \ub3d9\uc791\ud558\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"\u276f yarn run type-check ui\n> nx run ui:type-check\n\nlibs/ui/src/lib/ui.tsx(16,5): error TS2588: Cannot assign to 'a' because it is a constant.\nWarning: run-commands command \"tsc --noEmit -p ./libs/ui/tsconfig.eslint.json\" exited with non-zero status code\n\n \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\n\n >  NX   Ran target type-check for project ui (1s)\n\n    \u2716    1/1 failed\n    \u2714    0/1 succeeded [0 read from cache]\n\n")),(0,s.kt)("h2",{id:"cspell"},"cspell"),(0,s.kt)("p",null,"\ucf54\ub4dc \uc791\uc131 \uc911\uc5d0 \uc624\ud0c0\ub97c \uc785\ub825\ud558\uac8c \ub418\ub294 \uacbd\uc6b0\ub97c \uccb4\ud06c\ud558\uae30 \uc704\ud574 ",(0,s.kt)("a",{parentName:"p",href:"https://cspell.org/docs/getting-started/"},(0,s.kt)("inlineCode",{parentName:"a"},"cspell")),"\uc744 \uc124\uc815\ud558\uc600\ub2e4."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add -D cspell\n")),(0,s.kt)("p",null,"ignore\ud560 \ub2e8\uc5b4\ub4e4\uc744 \uc815\uc758\ud558\uae30\uc704\ud55c \uc124\uc815\ud30c\uc77c\uc744 \ucd94\uac00\ud55c\ub2e4."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-yaml"},"// cspell.config.yaml\n---\n$schema: https://raw.githubusercontent.com/streetsidesoftware/cspell/main/cspell.schema.json\nversion: '0.2'\n\nuseGitignore: true\n\nlanguage: en,eo,typescript,javqscript\n\nignoreWords:\n  # styled-component\n  - clsx\n")),(0,s.kt)("p",null,"package.json\uc5d0 \ub2e4\uc74c\uacfc \uac19\uc774 \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc815\uc758\ud55c\ub2e4."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'"cspell": "cspell --config cspell.config.yaml \\"**/*.{ts,js,tsx,jsx}\\" --no-progress --show-suggestions",\n')),(0,s.kt)("h2",{id:"commitlint"},"commitlint"),(0,s.kt)("p",null,"\ucee4\ubc0b \uba54\uc2dc\uc9c0 \uc815\uc758 \uc2dc\uc758 \uae30\ubcf8\uc801\uc778 \uaddc\uce59 \uccb4\ud06c\ub97c \uc704\ud55c \ub9b0\ud2b8 \uc124\uc815\uc774\ub2e4."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add -D commitlint @commitlint/config-conventional\n")),(0,s.kt)("p",null,"commit lint \uc124\uc815 \ud30c\uc77c\uc744 \ucd94\uac00\ud574\uc900\ub2e4."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-javascript"},"// .commitlintrc.js\nmodule.exports = {\n  extends: ['@commitlint/config-conventional'],\n  rules: {\n    'type-enum': [\n      2,\n      'always',\n      [\n        'build',\n        'ci',\n        'chore',\n        'docs',\n        'feat',\n        'fix',\n        'perf',\n        'refactor',\n        'revert',\n        'style',\n        'test',\n        'post',\n      ],\n    ],\n    'type-case': [2, 'always', 'lowerCase'],\n    'type-empty': [2, 'never'],\n    'subject-empty': [2, 'never'],\n    'header-max-length': [2, 'always', 100],\n  },\n};\n")),(0,s.kt)("h2",{id:"lint-staged--husky"},"lint-staged & husky"),(0,s.kt)("p",null,"git commit\uacfc push\ub97c \ud560 \ub54c\uc5d0 husky + lint-staged\ub97c \uc774\uc6a9\ud558\uc5ec git hook\uc744 \uc124\uc815\ud55c\ub2e4."),(0,s.kt)("p",null,"\ub2e4\uc74c\uacfc \uac19\uc774 \ud50c\ub7ec\uadf8\uc778\uc744 \uc124\uce58\ud558\uace0.."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"npx husky-init && yarn\nyarn add -D lint-staged\n")),(0,s.kt)("p",null,"\ub2e4\uc74c\uacfc \uac19\uc774 package script\uc5d0 \ucd94\uac00\ub97c \ud574\uc900\ub2e4."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'"prepare": "husky install",\n')),(0,s.kt)("p",null,"\uadf8\ub9ac\uace0 husky\ub97c \uc124\uce58\ud574\uc900\ub2e4."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"yarn install\n")),(0,s.kt)("p",null,"lint-staged\uc5d0\uc11c \uc218\ud589\ud558\uace0\uc790 \ud558\ub294 \ubd80\ubd84\ub4e4\uc744 ",(0,s.kt)("inlineCode",{parentName:"p"},".lintstagedrc.js")," \ud30c\uc77c\uc744 \uc0dd\uc131\ud558\uc5ec \uc815\uc758\ud574\uc900\ub2e4."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-javascript"},"module.exports = {\n  '*.{js,jsx,ts,tsx,json,md,mdx}': ['prettier --write', 'git add'],\n  '*.{js,jsx,ts,tsx}': [\n    () => 'yarn run lint:all',\n    'yarn run cspell',\n    'git add',\n  ],\n};\n")),(0,s.kt)("p",null,"\uadf8\ub7ec\uace0 \ub098\uc11c \ub9c8\uc9c0\ub9c9\uc73c\ub85c \ub2e4\uc74c\uacfc \uac19\uc774 husky\uc5d0 ",(0,s.kt)("inlineCode",{parentName:"p"},"pre-commit")," \ub2e8\uacc4\uc5d0\uc11c \uc815\uc758\ud55c lint-staged\uac00 \ub3d9\uc791\ud558\ub3c4\ub85d \uc124\uc815\ud574\uc8fc\uc5c8\ub2e4."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},'npx husky add .husky/pre-commit "yarn run lint-staged"\n')),(0,s.kt)("p",null,"\uadf8\ub9ac\uace0 git commit\uc744 \ud574\ubcf4\uba74 \ub2e4\uc74c\uacfc \uac19\uc774 \ud655\uc778\ud574\ubcfc \uc218 \uc788\ub2e4."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},"\u26a0 Some of your tasks use `git add` command. Please remove it from the config since all modifications made by tasks will be automatically added to the git commit index.\n\n[STARTED] Preparing lint-staged...\n[SUCCESS] Preparing lint-staged...\n[STARTED] Running tasks for staged files...\n[STARTED] .lintstagedrc.js \u2014 5 files\n[STARTED] *.{js,jsx,ts,tsx,json,md,mdx} \u2014 4 files\n[STARTED] *.{js,jsx,ts,tsx} \u2014 2 files\n[STARTED] prettier --write\n[STARTED] yarn run lint:all\n[SUCCESS] prettier --write\n[STARTED] git add\n[SUCCESS] git add\n[SUCCESS] *.{js,jsx,ts,tsx,json,md,mdx} \u2014 4 files\n[SUCCESS] yarn run lint:all\n[STARTED] yarn run cspell\n[SUCCESS] yarn run cspell\n[STARTED] git add\n[SUCCESS] git add\n[SUCCESS] *.{js,jsx,ts,tsx} \u2014 2 files\n[SUCCESS] .lintstagedrc.js \u2014 5 files\n[SUCCESS] Running tasks for staged files...\n[STARTED] Applying modifications from tasks...\n[SUCCESS] Applying modifications from tasks...\n[STARTED] Cleaning up temporary files...\n[SUCCESS] Cleaning up temporary files...\n[chore/lint 540987f] chore: configure lint-staged\n 5 files changed, 327 insertions(+), 36 deletions(-)\n rewrite .lintstagedrc.js (62%)\n")),(0,s.kt)("p",null,"\uc774\uc81c \ub2e4\uc74c\uc5d0\ub294 docusaurus \uc124\uc815\uc744 \ud574\ubd10\uc57c\uaca0\ub2e4."),(0,s.kt)("h2",{id:"references"},"References"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://nx.dev/recipes/other/eslint"},"Using ESLint in Nx Workspaces")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://zenn.dev/luvmini511/articles/ade1f0e4b64770"},"lint-staged + husky \u3067\u30b3\u30df\u30c3\u30c8\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u3060\u3051 cspell \u3092\u8d70\u3089\u305b\u308b")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://typescript-eslint.io/linting/typed-linting/"},"Linting with Type Information")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://karthickragavendran.medium.com/streamline-your-development-with-nx-and-yarn-workspaces-building-a-monorepo-setup-with-nestjs-and-e3d0d560decf"},"4 Simple Steps to Streamline Your Development: Creating a Monorepo Setup with Nx & Yarn Workspaces."))))}g.isMDXComponent=!0}}]);