"use strict";(self.webpackChunkgloria_tilog_root=self.webpackChunkgloria_tilog_root||[]).push([[5680],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>g});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var i=r.createContext({}),p=function(e){var n=r.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},c=function(e){var n=p(e.components);return r.createElement(i.Provider,{value:n},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(t),m=a,g=u["".concat(i,".").concat(m)]||u[m]||d[m]||o;return t?r.createElement(g,s(s({ref:n},c),{},{components:t})):r.createElement(g,s({ref:n},c))}));function g(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,s=new Array(o);s[0]=m;var l={};for(var i in n)hasOwnProperty.call(n,i)&&(l[i]=n[i]);l.originalType=e,l[u]="string"==typeof e?e:a,s[1]=l;for(var p=2;p<o;p++)s[p]=t[p];return r.createElement.apply(null,s)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},27531:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>g,frontMatter:()=>l,metadata:()=>p,toc:()=>u});var r=t(87462),a=t(63366),o=(t(67294),t(3905)),s=["components"],l={title:"VanillaJS\ub85c SPA \ud658\uacbd \uad6c\ucd95\ud558\uae30 - Step2: TypeScript",tags:["javascript","TypeScript","vanillajs","express"],date:new Date("2022-05-06T00:00:00.000Z")},i=void 0,p={permalink:"/gloria-tilog/2022/05/06/side-project/spa-webpack5/vanillajs-spa-typescript",source:"@site/blog/side-project/spa-webpack5/2022-05-06-vanillajs-spa-typescript.mdx",title:"VanillaJS\ub85c SPA \ud658\uacbd \uad6c\ucd95\ud558\uae30 - Step2: TypeScript",description:"typescript\ub97c \uc774\uc6a9\ud558\uc5ec \uac1c\ubc1c\ud558\uae30 \uc704\ud55c \ud658\uacbd\uc744 \uad6c\uc131\ud558\ub294 \uacfc\uc815\uc774\ub2e4.",date:"2022-05-06T00:00:00.000Z",formattedDate:"May 6, 2022",tags:[{label:"javascript",permalink:"/gloria-tilog/tags/javascript"},{label:"TypeScript",permalink:"/gloria-tilog/tags/type-script"},{label:"vanillajs",permalink:"/gloria-tilog/tags/vanillajs"},{label:"express",permalink:"/gloria-tilog/tags/express"}],readingTime:5.79,hasTruncateMarker:!0,authors:[],frontMatter:{title:"VanillaJS\ub85c SPA \ud658\uacbd \uad6c\ucd95\ud558\uae30 - Step2: TypeScript",tags:["javascript","TypeScript","vanillajs","express"],date:"2022-05-06T00:00:00.000Z"},prevItem:{title:"VanillaJS\ub85c SPA \ud658\uacbd \uad6c\ucd95\ud558\uae30 - Step3: Webpack5",permalink:"/gloria-tilog/2022/05/12/side-project/spa-webpack5/vanillajs-spa-webpack5"},nextItem:{title:"VanillaJS\ub85c SPA \ud658\uacbd \uad6c\ucd95\ud558\uae30 - Step1: Prepare",permalink:"/gloria-tilog/2022/05/04/side-project/spa-webpack5/vanillajs-spa-prepare"}},c={authorsImageUrls:[]},u=[{value:"Installation TypeScript",id:"installation-typescript",level:2},{value:"Configure <code>tsconfig.json</code>",id:"configure-tsconfigjson",level:2},{value:"Modify <code>src/server.js</code> to <code>src/server.ts</code>",id:"modify-srcserverjs-to-srcserverts",level:2},{value:"Modify <code>package.json</code>",id:"modify-packagejson",level:2},{value:"Run server",id:"run-server",level:2},{value:"Trouble Shootings",id:"trouble-shootings",level:2},{value:"Warning: To load an ES module, set &quot;type&quot;: &quot;module&quot; in the package.json or use the .mjs extension.",id:"warning-to-load-an-es-module-set-type-module-in-the-packagejson-or-use-the-mjs-extension",level:3},{value:"ReferenceError: __dirname is not defined",id:"referenceerror-__dirname-is-not-defined",level:3}],d={toc:u},m="wrapper";function g(e){var n=e.components,t=(0,a.Z)(e,s);return(0,o.kt)(m,(0,r.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"typescript\ub97c \uc774\uc6a9\ud558\uc5ec \uac1c\ubc1c\ud558\uae30 \uc704\ud55c \ud658\uacbd\uc744 \uad6c\uc131\ud558\ub294 \uacfc\uc815\uc774\ub2e4."),(0,o.kt)("h2",{id:"installation-typescript"},"Installation TypeScript"),(0,o.kt)("p",null,"\uc544\ub798\uc640 \uac19\uc740 \uc758\uc874\uc131 \ubaa8\ub4c8\ub4e4\uc744 \uc124\uce58\ud55c\ub2e4."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add -D typescript @types/express @types/node\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"@types/express : \uc55e\uc758 \uacfc\uc815\uc5d0\uc11c express\ub97c \uc124\uce58\ud574\uc8fc\uc5b4 typescript \uc0ac\uc6a9\uc744 \uc704\ud574 \ucd94\uac00\ub85c \uc124\uce58")),(0,o.kt)("p",null,"\uadf8\ub9ac\uace0 VSCode\ub97c \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0, \uc544\ub798\uc640 \uac19\uc740 \uba85\ub839\uc5b4\ub97c \uc218\ud589\ud55c\ub2e4."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"yarn dlx @yarnpkg/sdks vscode\n")),(0,o.kt)("p",null,"PnP(\ud50c\ub7ec\uadf8\uc564\ud50c\ub808\uc774) \uc124\uc815\uc744 \uc704\ud574 .yarnrc.yml \ud30c\uc77c \uc0c1\ub2e8\uc5d0 \ub2e4\uc74c\uc744 \ucd94\uac00\ud574\uc900\ub2e4.\n(\ud574\ub2f9 \uacfc\uc815\uc740 \uc0dd\ub7b5\ud574\ub3c4 \ub41c\ub2e4)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'# .yarnrc.yml\nnodeLinker: pnp\nyarnPath: ".yarn/releases/yarn-berry.cjs"\n')),(0,o.kt)("p",null,"typescript \uad00\ub828 plugin\uc744 \uc8fc\uc785\ud558\uae30 \uc704\ud574 \uc544\ub798\uc640 \uac19\uc740 \uba85\ub839\uc5b4\ub97c \uc218\ud589\ud574\uc900\ub2e4.\n(\uc774 \uacfc\uc815 \ub610\ud55c \uc120\ud0dd \uc0ac\ud56d\uc774\uc9c0\ub9cc, ",(0,o.kt)("inlineCode",{parentName:"p"},"@types/")," \uad00\ub828 \ud328\ud0a4\uc9c0\ub97c package.json\uc5d0 \ucd94\uac00\ud574\uc8fc\ubbc0\ub85c \uc720\uc6a9\ud558\ub2e4.)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"yarn plugin import typescript\n")),(0,o.kt)("h2",{id:"configure-tsconfigjson"},"Configure ",(0,o.kt)("inlineCode",{parentName:"h2"},"tsconfig.json")),(0,o.kt)("p",null,"\ub2e4\uc74c\uacfc \uac19\uc740 \ucee4\ub9e8\ub4dc\ub97c \uc2e4\ud589\ud558\uc5ec ",(0,o.kt)("inlineCode",{parentName:"p"},"tsconfig.json"),"\uc744 \uc0dd\uc131\ud55c\ub2e4."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npx tsc --init\n")),(0,o.kt)("p",null,"\uc0dd\uc131\ub41c ",(0,o.kt)("inlineCode",{parentName:"p"},"tsconfig.json")," \ud30c\uc77c\uc744 \uc544\ub798\uc640 \uac19\uc774 \uc218\uc815\ud558\uc5ec \uc124\uc815\ud574\uc8fc\uc5c8\ub2e4."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("inlineCode",{parentName:"p"},"outDir"),"\uc758 \uacbd\uc6b0\uc5d0\ub294 \uae30\uc874\uc5d0 \uc791\uc131\ud55c html\uacfc css \ud30c\uc77c\uae4c\uc9c0\ub294 \ud604\uc7ac \ube4c\ub4dc \uc0b0\ucd9c\ubb3c \uacbd\ub85c\uc5d0 \ubcf5\uc0ac\ud558\ub3c4\ub85d \uad6c\uc131\uc744 \ud558\uc9c0 \uc54a\uc544 \uc784\uc758\ub85c \uc8fc\uc11d\ucc98\ub9ac\ub97c \ud558\uc5ec ts \ud30c\uc77c\uacfc \ub3d9\uc77c\ud55c \uacbd\ub85c\uc5d0 \uc0dd\uc131\ub418\ub3c4\ub85d \uc124\uc815\ud558\uc600\ub2e4.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},"{\n  \"compilerOptions\": {\n    /* Visit https://aka.ms/tsconfig.json to read more about this file */\n\n    /* Language and Environment */\n    \"target\": \"es6\" /* \uc0ac\uc6a9\ud560 \ud2b9\uc815 ECMAScript \ubc84\uc804 \uc124\uc815: 'ES3' (\uae30\ubcf8), 'ES5', 'ES2015', 'ES2016', 'ES2017', 'ES2018', 'ES2019', 'ES2020', \ud639\uc740 'ESNEXT'. */,\n    \"jsx\": \"react\" /* JSX \ucf54\ub4dc \uc0dd\uc131 \uc124\uc815: 'preserve', 'react-native', \ud639\uc740 'react'. */,\n\n    /* Modules */\n    \"module\": \"esnext\" /* \ubaa8\ub4c8\uc744 \uc704\ud55c \ucf54\ub4dc \uc0dd\uc131 \uc124\uc815: 'none', 'commonjs', 'amd', 'system', 'umd', 'es2015', 'es2020', or 'ESNext'. */,\n    \"moduleResolution\": \"node\" /* \ubaa8\ub4c8 \ud574\uc11d \ubc29\ubc95 \uc124\uc815: 'node' (Node.js) \ud639\uc740 'classic' (TypeScript pre-1.6). */,\n    \"baseUrl\": \"./\" /* non-absolute\ud55c \ubaa8\ub4c8 \uc774\ub984\uc744 \ucc98\ub9ac\ud560 \uae30\uc900 \ub514\ub809\ud1a0\ub9ac */,\n    \"resolveJsonModule\": true /* Enable importing .json files */,\n\n    /* JavaScript Support */\n    \"allowJs\": true /* \uc790\ubc14\uc2a4\ud06c\ub9bd\ud2b8 \ud30c\uc77c \ucef4\ud30c\uc77c \ud5c8\uc6a9 \uc5ec\ubd80 */,\n\n    /* Emit */\n    \"sourceMap\": true /* \uc18c\uc2a4 \uc704\uce58 \ub300\uc2e0 \ub514\ubc84\uac70\uac00 \uc54c\uc544\uc57c \ud560 TypeScript \ud30c\uc77c\uc774 \uc704\uce58\ud560 \uacf3 */,\n    // \"outDir\": \"./dist\" /* \ud574\ub2f9 \ub514\ub809\ud1a0\ub9ac\ub85c \uacb0\uacfc \uad6c\uc870\ub97c \ubcf4\ub0c5\ub2c8\ub2e4. */,\n    \"noEmit\": false /* \uacb0\uacfc \ud30c\uc77c \ub0b4\ubcf4\ub0bc\uc9c0 \uc5ec\ubd80 */,\n    \"downlevelIteration\": true /* \ud0c0\uac9f\uc774 'ES5', 'ES3'\uc77c \ub54c\uc5d0\ub3c4 'for-of', spread \uadf8\ub9ac\uace0 destructuring \ubb38\ubc95 \ubaa8\ub450 \uc9c0\uc6d0 */,\n\n    /* Interop Constraints */\n    \"esModuleInterop\": true /* \ubaa8\ub4e0 imports\uc5d0 \ub300\ud55c namespace \uc0dd\uc131\uc744 \ud1b5\ud574 CommonJS\uc640 ES Modules \uac04\uc758 \uc0c1\ud638 \uc6b4\uc6a9\uc131\uc774 \uc0dd\uae30\uac8c\ud560 \uc9c0 \uc5ec\ubd80, 'allowSyntheticDefaultImports'\ub97c \uc554\uc2dc\uc801\uc73c\ub85c \uc2b9\uc778\ud569\ub2c8\ub2e4. */,\n    \"forceConsistentCasingInFileNames\": true /* \uac19\uc740 \ud30c\uc77c\uc5d0 \ub300\ud55c \uc77c\uad00\ub418\uc9c0 \uc54a\uc740 \ucc38\uc870\ub97c \ud5c8\uc6a9\ud558\uc9c0 \uc54a\uc744 \uc9c0 \uc5ec\ubd80 */,\n\n    /* Type Checking */\n    \"strict\": true /* \ubaa8\ub4e0 \uc5c4\uaca9\ud55c \ud0c0\uc785-\uccb4\ud0b9 \uc635\uc158 \ud65c\uc131\ud654 \uc5ec\ubd80 */,\n\n    /* Completeness */\n    \"skipLibCheck\": true /* \uc815\uc758 \ud30c\uc77c\uc758 \ud0c0\uc785 \ud655\uc778\uc744 \uac74\ub108 \ub6f8 \uc9c0 \uc5ec\ubd80 */\n  },\n  \"include\": [\"src\"]\n}\n")),(0,o.kt)("h2",{id:"modify-srcserverjs-to-srcserverts"},"Modify ",(0,o.kt)("inlineCode",{parentName:"h2"},"src/server.js")," to ",(0,o.kt)("inlineCode",{parentName:"h2"},"src/server.ts")),(0,o.kt)("p",null,"\uc55e\uc5d0\uc11c \uc791\uc131\ud55c ",(0,o.kt)("inlineCode",{parentName:"p"},"<project_root_dir>/src/server.js"),"\uc744 ts \ud30c\uc77c\ub85c \uc218\uc815\ud55c\ub2e4."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"// server.ts\nimport express from 'express';\nimport path from 'path';\n\nconst app = express();\nconst resolve = (dir) => path.resolve(__dirname, 'frontend', dir);\n\n/* Ensure any requests prefixed with /static will serve our \"src/static\" directory */\napp.use('/static', express.static(resolve('static')));\n\n/* Redirect all routes to our (soon to exist) \"index.html\" file */\napp.get('/*', (req, res) => {\n  res.sendFile(resolve('index.html'));\n});\n\napp.listen(process.env.PORT || 3000, () => {\n  console.log('Server running...');\n});\n")),(0,o.kt)("h2",{id:"modify-packagejson"},"Modify ",(0,o.kt)("inlineCode",{parentName:"h2"},"package.json")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"script"),"\uc5d0 \uc544\ub798\uc640 \uac19\uc774 \ucd94\uac00\ud574\uc900\ub2e4."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'"start": "yarn build;node src/server.js",\n"build": "tsc -p .",\n')),(0,o.kt)("h2",{id:"run-server"},"Run server"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"yarn start"),"\ub97c \uc2e4\ud589\ud558\uc5ec \uc11c\ubc84\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uc2e4\ud589\uc774 \ub418\uace0, \uc6f9 \ube0c\ub77c\uc6b0\uc800\ub85c \uc811\uc18d\uc774 \ub418\ub294 \uc9c0 \ud655\uc778\ud574\ubcf8\ub2e4."),(0,o.kt)("p",null,"\uc774\uc81c \ub2e4\uc74c\ubc88\uc5d0\ub294 ",(0,o.kt)("inlineCode",{parentName:"p"},"webpack"),"\uc744 \uc774\uc6a9\ud558\uc5ec \ube4c\ub4dc\ub41c \uc0b0\ucd9c\ubb3c\uc744 \uacbd\ub85c\ub97c \ubd84\ub9ac\ud558\uace0, \ucf54\ub4dc \uc218\uc815 \uc2dc\uc5d0 \uc218\uc815\ub41c \ucf54\ub4dc\ub97c \ubc18\uc601\ud558\uc5ec \uc7ac\ucef4\ud30c\uc77c\uc774 \ub420 \uc218 \uc788\ub3c4\ub85d \uad6c\uc131\ud574\ubcf4\uace0\uc790 \ud55c\ub2e4."),(0,o.kt)("h2",{id:"trouble-shootings"},"Trouble Shootings"),(0,o.kt)("h3",{id:"warning-to-load-an-es-module-set-type-module-in-the-packagejson-or-use-the-mjs-extension"},'Warning: To load an ES module, set "type": "module" in the package.json or use the .mjs extension.'),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"node dist/server.js"),"\uc640 \uac19\uc774 \uc2e4\ud589\ud558\uc600\uc744 \ub54c\uc5d0 \uc544\ub798\uc640 \uac19\uc740 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud558\uc600\ub2e4."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'(node:53574) Warning: To load an ES module, set "type": "module" in the package.json or use the .mjs extension.\n(Use `node --trace-warnings ...` to show where the warning was created)\n')),(0,o.kt)("p",null,"\ud574\uacb0\ubc29\ubc95\uc740 ",(0,o.kt)("inlineCode",{parentName:"p"},"package.json"),"\uc5d0 ",(0,o.kt)("strong",{parentName:"p"},'type: "module"'),"\uc744 \ucd94\uac00\ud574\uc900\ub2e4."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "name": "cocoa-clone",\n  "version": "1.0.0",\n  "packageManager": "yarn@3.2.0",\n  //...SKIP...\n  "license": "MIT",\n  "type": "module"\n  //...SKIP...\n}\n')),(0,o.kt)("h3",{id:"referenceerror-__dirname-is-not-defined"},"ReferenceError: ","_","_","dirname is not defined"),(0,o.kt)("p",null,"commonjs\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub358 ",(0,o.kt)("inlineCode",{parentName:"p"},"__dirname")," \ubcc0\uc218\uac00 ES \ubaa8\ub4c8\uc5d0\ub294 \uc5c6\uc73c\ubbc0\ub85c \ubc1c\uc0dd\ud558\ub294 \uc5d0\ub7ec\uc774\ub2e4."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'file:///Users/user/Documents/mio/cocoa-clone/dist/server.js:4\nvar resolve = function (dir) { return path.resolve(__dirname, "frontend", dir); };\n                                                   ^\n\nReferenceError: __dirname is not defined\n    at resolve (file:///Users/user/Documents/mio/cocoa-clone/dist/server.js:4:52)\n    at file:///Users/user/Documents/mio/cocoa-clone/dist/server.js:7:35\n    at ModuleJob.run (node:internal/modules/esm/module_job:154:23)\n    at async Loader.import (node:internal/modules/esm/loader:177:24)\n    at async Object.loadESM (node:internal/process/esm_loader:68:5)\n')),(0,o.kt)("p",null,"\uc544\ub798\uc640 \uac19\uc774 \uc218\uc815\ud558\uc5ec \ud574\uacb0\ud574\uc8fc\uc5c8\ub2e4."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"ref: ",(0,o.kt)("a",{parentName:"li",href:"https://velog.io/@suyeonpi/Node.js-dirname-is-not-defined-ES6"},"https://velog.io/@suyeonpi/Node.js-dirname-is-not-defined-ES6"))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import path from 'path';\nimport { fileURLToPath } from 'url';\n\nconst app = express();\nconst resolve = (dir: string) => {\n  const __filename = fileURLToPath(import.meta.url);\n  const __dirname = path.dirname(__filename);\n\n  return path.resolve(__dirname, 'frontend', dir);\n};\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/gloriaJun/vanilajs-spa-webpack-boilerplate/tree/97ce912e00692c2c72a2e0f0c48438a8172bb4c7"},"Step2 \uacfc\uc815\uae4c\uc9c0\uc758 \uc791\uc5c5 \ub0b4\uc6a9"))))}g.isMDXComponent=!0}}]);