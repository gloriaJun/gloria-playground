<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">[CI/CD] Configuration CI (1) - Install Jenkins (master-slave) with nginx proxy | L.E.T</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://gloriajun.github.io/gloria-tilog/2021/05/13/ci/install-ci-jenkins"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="google-site-verification" content="PrqvOIk9NNqMEDDZ5mciMBaskqjDRVbL7g1lqt_S64Y"><meta data-rh="true" property="og:title" content="[CI/CD] Configuration CI (1) - Install Jenkins (master-slave) with nginx proxy | L.E.T"><meta data-rh="true" name="description" content="회사에서 개발 환경에 대한 CI 환경 구성을 하며 정리했던 기록이다."><meta data-rh="true" property="og:description" content="회사에서 개발 환경에 대한 CI 환경 구성을 하며 정리했던 기록이다."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2021-05-13T09:31:00.000Z"><meta data-rh="true" property="article:tag" content="jenkins,sonarQube,coverage"><link data-rh="true" rel="icon" href="/gloria-tilog/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://gloriajun.github.io/gloria-tilog/2021/05/13/ci/install-ci-jenkins"><link data-rh="true" rel="alternate" href="https://gloriajun.github.io/gloria-tilog/2021/05/13/ci/install-ci-jenkins" hreflang="en"><link data-rh="true" rel="alternate" href="https://gloriajun.github.io/gloria-tilog/2021/05/13/ci/install-ci-jenkins" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/gloria-tilog/rss.xml" title="L.E.T RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/gloria-tilog/atom.xml" title="L.E.T Atom Feed"><link rel="stylesheet" href="/gloria-tilog/assets/css/styles.f9d3ef7d.css">
<link rel="preload" href="/gloria-tilog/assets/js/runtime~main.e2878bc3.js" as="script">
<link rel="preload" href="/gloria-tilog/assets/js/main.240c9e0f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/gloria-tilog/"><div class="navbar__logo"><img src="/gloria-tilog/img/docusaurus.png" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/gloria-tilog/img/docusaurus.png" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">L.E.T</b></a><a class="navbar__item navbar__link" href="/gloria-tilog/docs/bookmarks">Bookmark</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/gloriajun" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/gloria-tilog/2023/05/23/side-project/docusaurus/docusaurus-search">[docusaurus] Configure Search</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/gloria-tilog/2023/05/19/etc/2023/nx-tips">[NX] Tips</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/gloria-tilog/2023/05/19/side-project/docusaurus/docusaurus-code-block">[docusaurus] Configure Code Block</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/gloria-tilog/2023/05/16/trouble-shootings/2023/ios-web-inspector">Can not display inspector via iOS Simulator</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/gloria-tilog/2023/05/16/native/2023/ios-simulator">How to delete or check iOS simulator</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">[CI/CD] Configuration CI (1) - Install Jenkins (master-slave) with nginx proxy</h1><div class="container_mt6G margin-vert--md"><time datetime="2021-05-13T09:31:00.000Z" itemprop="datePublished">May 13, 2021</time> · <!-- -->9 min read</div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>회사에서 개발 환경에 대한 CI 환경 구성을 하며 정리했던 기록이다.</p><p>구성한 환경은 아래와 같다.</p><blockquote><p>Server: CentOS 7.9 8cpu 32ram 100G SSD
Docker v20.10.7
Docker Compose v1.28.6
Jenkins v2.277.4
SonarQube v7.9.4</p></blockquote><p>젠킨스를 서버에 설치 및 설정을 하는 과정이다.
젠킨스의 설치 환경 구성은 도커 환경 위에 Jenkins와 SSL 적용을 위해 nginx를 설치하여 proxy 구성을 하였다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-the-nginx-config-files">Create the nginx config files<a href="#create-the-nginx-config-files" class="hash-link" aria-label="Direct link to Create the nginx config files" title="Direct link to Create the nginx config files">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="confnginxconf">./conf/nginx.conf<a href="#confnginxconf" class="hash-link" aria-label="Direct link to ./conf/nginx.conf" title="Direct link to ./conf/nginx.conf">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">user nginx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">worker_processes </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">error_log /var/log/nginx/error.log warn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pid /var/run/nginx.pid</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">events </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    worker_connections </span><span class="token number">1024</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">http </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    include /etc/nginx/mime.types</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    default_type application/octet-stream</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># 웹 설정하는 부분</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    include /etc/nginx/conf.d/*.conf</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># 로그 파일에 대한 포맷을 설정해주는 부분</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    log_format main </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    access_log /var/log/nginx/access.log main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># https://www.lesstif.com/system-admin/nginx-http-413-client-intended-to-send-too-large-body-86311189.html</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    client_max_body_size 8M</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># gzip configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">gzip</span><span class="token plain"> on</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    gzip_disable </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;msie6&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    gzip_min_length </span><span class="token number">10240</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    gzip_buffers </span><span class="token number">32</span><span class="token plain"> 32k</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    gzip_comp_level </span><span class="token number">9</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    gzip_proxied any</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    gzip_types text/plain application/javascript application/x-javascript text/javascript text/xml text/css</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    gzip_vary on</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    sendfile on</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    keepalive_timeout </span><span class="token number">65</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="confjenkinsconf">./conf/jenkins.conf<a href="#confjenkinsconf" class="hash-link" aria-label="Direct link to ./conf/jenkins.conf" title="Direct link to ./conf/jenkins.conf">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">upstream jenkins </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    server jenkins-master:8080</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">server </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    listen </span><span class="token number">80</span><span class="token plain"> default_server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    listen </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">::</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">:80 default_server</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    server_name </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;_&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    location / </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    proxy_set_header    X-Real-IP           </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$remote_addr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    proxy_set_header    X-Forwarded-For     </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$proxy_add_x_forwarded_for</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    proxy_set_header    X-Forwarded-Proto   </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$scheme</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    proxy_set_header    Host                </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$host</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    proxy_set_header    X-Forwarded-Host    </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$host</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    proxy_set_header    X-Forwarded-Port    </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$server_port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    proxy_set_header    X-NginX-Proxy       </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    proxy_pass_header   Set-Cookie</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    proxy_http_version  </span><span class="token number">1.1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    proxy_cache_bypass  </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$http_upgrade</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    proxy_pass http://jenkins/</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-docker-compose-files">Create docker compose files<a href="#create-docker-compose-files" class="hash-link" aria-label="Direct link to Create docker compose files" title="Direct link to Create docker compose files">​</a></h2><p>먼저 jenkins master node를 위한 컨테이너와 nginx 컨테이너를 정의한다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">version: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">services:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  nginx:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    image: nginx:latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    container_name: nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    hostname: nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    privileged: </span><span class="token boolean">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    restart: always</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - ./conf/jenkins.conf:/etc/nginx/conf.d/jenkins.conf</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - ./conf/nginx.conf:/etc/nginx/nginx.conf</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - </span><span class="token number">80</span><span class="token plain">:80</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">TZ</span><span class="token operator">=</span><span class="token plain">Asia/Seoul</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    depends_on:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - jenkins-master</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  jenkins-master:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    image: jenkins/jenkins:lts</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    container_name: jenkins-master</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    hostname: jenkins-master</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    privileged: </span><span class="token boolean">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    restart: always</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - /var/run/docker.sock:/var/run/docker.sock</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - /usr/bin/docker:/usr/bin/docker</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - </span><span class="token environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token plain">/jenkins_master:/var/jenkins_home</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">TZ</span><span class="token operator">=</span><span class="token plain">Asia/Seoul</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="jenkins-유저-생성-및-jenkin-home-폴더-생성">jenkins 유저 생성 및 jenkin home 폴더 생성<a href="#jenkins-유저-생성-및-jenkin-home-폴더-생성" class="hash-link" aria-label="Direct link to jenkins 유저 생성 및 jenkin home 폴더 생성" title="Direct link to jenkins 유저 생성 및 jenkin home 폴더 생성">​</a></h3><p><strong>jenkins_home</strong> 폴더를 생성하여 젠킨스 사용자에게 소유권을 넘기기 위한 과정이다.</p><p>젠킨스 내부에서 생성되는 jenkins 유저의 id는 기본적으로 1000인데, 해당 유저를 생성하지 않으면 권한 부여 시 아이디로 주면되므로 사용자 생성 부분은 생략해도 된다.
하지만, 나는 이왕이면 아이디보다 사용자명으로 보이는 게 좋은 것 같아서 동일한 아이디로 로컬 서버에 jenkins 유저를 생성하고, docker 그룹에 포함시켰다.
(docker 그룹은 docker 설치 시에 생성되는 group 이다.)</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> /usr/sbin/useradd jenkins -u </span><span class="token number">1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> /usr/sbin/usermod -aG </span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> jenkins</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>도커 컨테이너 실행 전에 젠킨스 파일이 위치할 폴더 생성를 생성해주고, jenkins 유저에게 소유권을 넘겨준다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">mkdir</span><span class="token plain"> -p /home1/irteam/jenkins_home</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">chown</span><span class="token plain"> -R jenkins:docker /home1/irteam/jenkins_home</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="docker-container-기동">docker container 기동<a href="#docker-container-기동" class="hash-link" aria-label="Direct link to docker container 기동" title="Direct link to docker container 기동">​</a></h3><p>이제 위에서 생성한 docker compose 파일을 이용하여 도커 컨테이너를 띄운다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">docker-compose</span><span class="token plain"> up -d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>컨테이너 실행 후에 아래와 같은 명령어를 이용하여 정상적으로 기동 및 실행 중인지 확인할 수 있다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ </span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">ps</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CONTAINER ID   IMAGE                      COMMAND                  CREATED          STATUS                  PORTS                                NAMES</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">7b527bf37770   nginx:latest               </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/docker-entrypoint.…&quot;</span><span class="token plain">   </span><span class="token number">41</span><span class="token plain"> minutes ago   Up </span><span class="token number">24</span><span class="token plain"> minutes           </span><span class="token number">0.0</span><span class="token plain">.0.0:80-</span><span class="token operator">&gt;</span><span class="token number">80</span><span class="token plain">/tcp                   nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">66c7edd6be59   jenkins/jenkins:lts        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/sbin/tini -- /usr/…&quot;</span><span class="token plain">   </span><span class="token number">41</span><span class="token plain"> minutes ago   Up </span><span class="token number">24</span><span class="token plain"> minutes           </span><span class="token number">8080</span><span class="token plain">/tcp, </span><span class="token number">0.0</span><span class="token plain">.0.0:50000-</span><span class="token operator">&gt;</span><span class="token number">50000</span><span class="token plain">/tcp   jenkins-master</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>만약, 도커 컨테이너 실행 시 후에 에러가 발생하였다거나, 실행 로그를 확인하고 싶으면 다음과 같이 확인할 수 있다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> container logs </span><span class="token operator">&lt;</span><span class="token plain">container_name</span><span class="token operator">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ex) docker container logs jenkins</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>정상적으로 젠킨스가 실행이 되었다면...nginx에서 젠킨스의 8080 포트를 nginx를 통하여 80 포트로 포트포워딩 처리를 하였으므로 웹브라우저를 통하여 <strong>http://&lt;server_ip&gt;</strong> 주소로 젠킨스 관리자 화면에 접근할 수 있다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-started-jenkins">Getting Started Jenkins<a href="#getting-started-jenkins" class="hash-link" aria-label="Direct link to Getting Started Jenkins" title="Direct link to Getting Started Jenkins">​</a></h2><p>젠킨스에 설치 후 웹 브라우저를 이용하여 최초로 접속하는 경우에는 설치 시 설정된 초기 패스워드를 확인하여 접속해야한다.
초기 패스워드는 다음과 같은 방법으로 확인할 수 있다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">exec</span><span class="token plain"> jenkins </span><span class="token function" style="color:rgb(80, 250, 123)">cat</span><span class="token plain"> /var/jenkins_home/secrets/initialAdminPassword</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>해당 패스워드를 이용하여 로그인을 하고 나면 아래와 같이 플러그인을 설치하라는 매뉴가 나온다.
대부분 기본적으로 젠킨스에서 제안하는 플러그인을 설치하지만, 원하면 각각 별도로 플러그인을 골라서 설치할 수도 있다.
<img loading="lazy" alt="getting-started-plugins" src="/gloria-tilog/assets/images/jenkins-getting-started-plugins-4859f3f7c764f0d74d5d0fd9900e5ec7.png" width="1172" height="732" class="img_ev3q"></p><p>플러그인 설치가 완료가 되면, 초기 로그인 사용자에 대한 설정을 하는 화면이 나오게 된다.</p><p>그러면 일단 젠킨스 설치는 완료!!!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="add-jenkins-slave-node">Add jenkins slave node<a href="#add-jenkins-slave-node" class="hash-link" aria-label="Direct link to Add jenkins slave node" title="Direct link to Add jenkins slave node">​</a></h2><p>이제 기본적인 젠킨스 설치는 마쳤으므로 slave node 추가를 위한 설정을 한다.
아래와 같이 master container에 접근하여 ssh key를 생성한다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ </span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> container </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">exec</span><span class="token plain"> -it jenkins-master /bin/bash</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">jenkins@jenkins-master:/$  ssh-keygen -t rsa -C </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;jenkins-master&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Generating public/private rsa key pair.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Enter </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">which</span><span class="token plain"> to save the key </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">/var/jenkins_home/.ssh/id_rsa</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Created directory </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/var/jenkins_home/.ssh&#x27;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Enter passphrase </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">empty </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> no passphrase</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Enter same passphrase again:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Your identification has been saved </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> /var/jenkins_home/.ssh/id_rsa.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Your public key has been saved </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> /var/jenkins_home/.ssh/id_rsa.pub.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">The key fingerprint is:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">SHA256:wmChG3ToFUv4hCSzvhAai2Rx/aRVHv63cDeaqjxehnM jenkins-master</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">The key&#x27;s randomart image is:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+---</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">RSA </span><span class="token number">2048</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">----+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">ooo</span><span class="token operator">=</span><span class="token plain">*.  .o       </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain">*+o+ oo </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">++o++ </span><span class="token operator">=</span><span class="token plain">  o       </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">*+.+.+ </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain">  </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token operator">=</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">   o S  o o o </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain">    </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain">  </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain"> + </span><span class="token operator">=</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain">       o E +   </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token operator">=</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">        .+o.     </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+----</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">SHA256</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">-----+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>그리고 <strong>~/.ssh</strong> 폴더로 이동하여 <code>id_rsa.pub</code> 키를 클립보드로 복사해둔다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">jenkins@jenkins-master:/$ </span><span class="token function" style="color:rgb(80, 250, 123)">cat</span><span class="token plain"> ~/.ssh/id_rsa.pub</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ssh-rsa AAAAB3NzaC1yc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="docker-compose에-slave-노드-정의-추가">docker compose에 slave 노드 정의 추가<a href="#docker-compose에-slave-노드-정의-추가" class="hash-link" aria-label="Direct link to docker compose에 slave 노드 정의 추가" title="Direct link to docker compose에 slave 노드 정의 추가">​</a></h3><p>앞에서 정의한 docker-compose.yml 파일에 slave node에 대한 정의를 추가해준다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  jenkins-master:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    image: jenkins/jenkins:lts</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    container_name: jenkins-master</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    hostname: jenkins-master</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    privileged: </span><span class="token boolean">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    restart: always</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - /var/run/docker.sock:/var/run/docker.sock</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - /usr/bin/docker:/usr/bin/docker</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - </span><span class="token environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token plain">/jenkins_master:/var/jenkins_home</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">TZ</span><span class="token operator">=</span><span class="token plain">Asia/Seoul</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    links:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - jenkins-agent01</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  jenkins-agent01:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    image: jenkins/ssh-agent:latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    container_name: jenkins-agent01</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    hostname: jenkins-agent01</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    privileged: </span><span class="token boolean">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    restart: always</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - /var/run/docker.sock:/var/run/docker.sock</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - /usr/bin/docker:/usr/bin/docker</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - </span><span class="token environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token plain">/jenkins_agent:/var/jenkins_home</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">JENKINS_AGENT_SSH_PUBKEY</span><span class="token operator">=</span><span class="token plain">ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDLT3ZHpTr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">TZ</span><span class="token operator">=</span><span class="token plain">Asia/Seoul</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>컨테이너를 재기동한다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> container stop jenkins-master</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> container stop nginx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">docker-compose</span><span class="token plain"> up -d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="노드-추가">노드 추가<a href="#노드-추가" class="hash-link" aria-label="Direct link to 노드 추가" title="Direct link to 노드 추가">​</a></h3><p>젠킨스 웹페이지에 접속하여 노드 추가 하기 전에 <strong>Jenkins관리 &gt; Manage Credentials</strong> 에서 ssh key를 등록한다.</p><p><img loading="lazy" alt="credential" src="/gloria-tilog/assets/images/jenkins-slave-credential-4714ded4246eae1344f34fe8922fc1e4.png" width="2848" height="1604" class="img_ev3q"></p><p>credential 키를 등록한 뒤에 <strong>Jenkins관리 &gt; 노드관리 &gt; 신규 노드</strong> 매뉴로 접근하여 agent를 등록한다.
<img loading="lazy" alt="add-node" src="/gloria-tilog/assets/images/jenkins-add-node-f412d9efbd2d76fa905632fe46fdcad7.png" width="2842" height="2004" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="trouble-shooting">Trouble Shooting<a href="#trouble-shooting" class="hash-link" aria-label="Direct link to Trouble Shooting" title="Direct link to Trouble Shooting">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="javaioioexception-java-not-found-on-hudsonslavesslavecomputer63a0ae53-install-java-8-or-java-11-on-the-agent">java.io.IOException: Java not found on hudson.slaves.SlaveComputer@63a0ae53. Install Java 8 or Java 11 on the Agent.<a href="#javaioioexception-java-not-found-on-hudsonslavesslavecomputer63a0ae53-install-java-8-or-java-11-on-the-agent" class="hash-link" aria-label="Direct link to java.io.IOException: Java not found on hudson.slaves.SlaveComputer@63a0ae53. Install Java 8 or Java 11 on the Agent." title="Direct link to java.io.IOException: Java not found on hudson.slaves.SlaveComputer@63a0ae53. Install Java 8 or Java 11 on the Agent.">​</a></h3><p>agent 노드 추가 후에 launch 시에 아래와 같은 에러 로그가 노출이 되면 <strong>Jenkins관리 &gt; 노드관리</strong>에서 해당 agent 노드의 java path를 설정해준다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">java.io.IOException: Java not found on hudson.slaves.SlaveComputer@63a0ae53. Install Java </span><span class="token number">8</span><span class="token plain"> or Java </span><span class="token number">11</span><span class="token plain"> on the Agent.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    at hudson.plugins.sshslaves.JavaVersionChecker.resolveJava</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">JavaVersionChecker.java:84</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    at hudson.plugins.sshslaves.SSHLauncher</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$1</span><span class="token plain">.call</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">SSHLauncher.java:453</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    at hudson.plugins.sshslaves.SSHLauncher</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$1</span><span class="token plain">.call</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">SSHLauncher.java:421</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    at java.util.concurrent.FutureTask.run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">FutureTask.java:266</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    at java.util.concurrent.ThreadPoolExecutor.runWorker</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ThreadPoolExecutor.java:1149</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    at java.util.concurrent.ThreadPoolExecutor</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$Worker</span><span class="token plain">.run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ThreadPoolExecutor.java:624</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    at java.lang.Thread.run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Thread.java:748</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">07/05/21 </span><span class="token number">17</span><span class="token plain">:26:56</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Launch failed - cleaning up connection</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>아래와 같이 해당 agent 노드에 접속하여 java path를 확인하고 설정</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ </span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> container </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">exec</span><span class="token plain"> -it jenkins-agent01 /bin/bash</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">root@jenkins-agent01:/home/jenkins</span><span class="token comment" style="color:rgb(98, 114, 164)"># which java</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/usr/local/openjdk-8/bin/java</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="javaioioexception-could-not-copy-remotingjar-into-varjenkins_home--on-agent">java.io.IOException: Could not copy remoting.jar into &#x27;/var/jenkins_home &#x27; on agent<a href="#javaioioexception-could-not-copy-remotingjar-into-varjenkins_home--on-agent" class="hash-link" aria-label="Direct link to java.io.IOException: Could not copy remoting.jar into &#x27;/var/jenkins_home &#x27; on agent" title="Direct link to java.io.IOException: Could not copy remoting.jar into &#x27;/var/jenkins_home &#x27; on agent">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">07/05/21 </span><span class="token number">17</span><span class="token plain">:35:37</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">SSH</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Remote </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"> system root /var/jenkins_home  does not exist. Will try to create it</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">java.io.IOException: Could not copy remoting.jar into </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/var/jenkins_home &#x27;</span><span class="token plain"> on agent</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    at hudson.plugins.sshslaves.SSHLauncher.copyAgentJar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">SSHLauncher.java:738</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    at hudson.plugins.sshslaves.SSHLauncher.access</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$400</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">SSHLauncher.java:111</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    at hudson.plugins.sshslaves.SSHLauncher</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$1</span><span class="token plain">.call</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">SSHLauncher.java:456</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    at hudson.plugins.sshslaves.SSHLauncher</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$1</span><span class="token plain">.call</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">SSHLauncher.java:421</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    at java.util.concurrent.FutureTask.run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">FutureTask.java:266</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    at java.util.concurrent.ThreadPoolExecutor.runWorker</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ThreadPoolExecutor.java:1149</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    at java.util.concurrent.ThreadPoolExecutor</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$Worker</span><span class="token plain">.run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ThreadPoolExecutor.java:624</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    at java.lang.Thread.run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">Thread.java:748</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Caused by: java.io.IOException: Failed to </span><span class="token function" style="color:rgb(80, 250, 123)">mkdir</span><span class="token plain"> /var/jenkins_home</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    at com.trilead.ssh2.jenkins.SFTPClient.mkdirs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">SFTPClient.java:91</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    at hudson.plugins.sshslaves.SSHLauncher.copyAgentJar</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">SSHLauncher.java:695</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">. </span><span class="token number">7</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">more</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Caused by: com.trilead.ssh2.SFTPException: Permission denied </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">SSH_FX_PERMISSION_DENIED: The user does not have sufficient permissions to perform the operation.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    at com.trilead.ssh2.SFTPv3Client.expectStatusOKMessage</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">SFTPv3Client.java:555</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    at com.trilead.ssh2.SFTPv3Client.mkdir</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">SFTPv3Client.java:955</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    at com.trilead.ssh2.jenkins.SFTPClient.mkdirs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">SFTPClient.java:89</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">. </span><span class="token number">8</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">more</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2><ul><li><a href="https://architectophile.tistory.com/12" target="_blank" rel="noopener noreferrer">(Nginx) 기본 설정 방법</a></li><li><a href="https://elvanov.com/2312" target="_blank" rel="noopener noreferrer">실제로 사용 가능한 nginx 프록시 서버 만들기 (docker-compose)</a></li><li><a href="https://cornswrold.tistory.com/510" target="_blank" rel="noopener noreferrer">젠킨스 Master/Slave 분산 빌드 환경 도커로 구축하기</a></li></ul></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/gloria-tilog/tags/jenkins">jenkins</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/gloria-tilog/tags/sonar-qube">sonarQube</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/gloria-tilog/tags/coverage">coverage</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/gloria-tilog/2021/05/14/ci/configuration-ci-jenkins"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">[CI/CD] Configuration CI (2) - Install Jenkins (master-slave) Plugins</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/gloria-tilog/2021/01/20/server/nginx-proxy"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">[Nginx] Reverse Proxy</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#create-the-nginx-config-files" class="table-of-contents__link toc-highlight">Create the nginx config files</a><ul><li><a href="#confnginxconf" class="table-of-contents__link toc-highlight">./conf/nginx.conf</a></li><li><a href="#confjenkinsconf" class="table-of-contents__link toc-highlight">./conf/jenkins.conf</a></li></ul></li><li><a href="#create-docker-compose-files" class="table-of-contents__link toc-highlight">Create docker compose files</a><ul><li><a href="#jenkins-유저-생성-및-jenkin-home-폴더-생성" class="table-of-contents__link toc-highlight">jenkins 유저 생성 및 jenkin home 폴더 생성</a></li><li><a href="#docker-container-기동" class="table-of-contents__link toc-highlight">docker container 기동</a></li></ul></li><li><a href="#getting-started-jenkins" class="table-of-contents__link toc-highlight">Getting Started Jenkins</a></li><li><a href="#add-jenkins-slave-node" class="table-of-contents__link toc-highlight">Add jenkins slave node</a><ul><li><a href="#docker-compose에-slave-노드-정의-추가" class="table-of-contents__link toc-highlight">docker compose에 slave 노드 정의 추가</a></li><li><a href="#노드-추가" class="table-of-contents__link toc-highlight">노드 추가</a></li></ul></li><li><a href="#trouble-shooting" class="table-of-contents__link toc-highlight">Trouble Shooting</a><ul><li><a href="#javaioioexception-java-not-found-on-hudsonslavesslavecomputer63a0ae53-install-java-8-or-java-11-on-the-agent" class="table-of-contents__link toc-highlight">java.io.IOException: Java not found on hudson.slaves.SlaveComputer@63a0ae53. Install Java 8 or Java 11 on the Agent.</a></li><li><a href="#javaioioexception-could-not-copy-remotingjar-into-varjenkins_home--on-agent" class="table-of-contents__link toc-highlight">java.io.IOException: Could not copy remoting.jar into &#39;/var/jenkins_home &#39; on agent</a></li></ul></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/gloria-tilog/assets/js/runtime~main.e2878bc3.js"></script>
<script src="/gloria-tilog/assets/js/main.240c9e0f.js"></script>
</body>
</html>