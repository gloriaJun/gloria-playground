---
# main_category: Mini Project
# category: 1. DevLog
title: 'Configure lint'
tags: ['devlog', 'nx']
created_time: 2023-04-30T21:03
updated_time: 2023-04-30T21:03
---

이번에는 lint와 cspeel 그리고 husky 설정을 적용하고자 한다.

## eslint

기본적으로 앞에서 설정하면서 적용이 되어있어서, 필요한 부분만 추가로 커스텀해주었다.

추가로 설정하고자 하는 플러그인들을 설치한다.
```bash
yarn add -D eslint-config-airbnb eslint-config-airbnb-typescript eslint-plugin-prettier
```

그리고 다음과 같이 설정 파일을 수정하였다.
```javascript
module.exports = {
  root: true,
  ignorePatterns: ['**/*'],
  plugins: ['@nx'],
  extends: [
    'airbnb',
    'plugin:prettier/recommended',
  ],
  rules: {
    'prettier/prettier': ['error'],
  },
  overrides: [
    {
      files: ['*.ts', '*.tsx', '*.js', '*.jsx'],
      rules: {
        '@nx/enforce-module-boundaries': [
          'error',
          {
            enforceBuildableLibDependency: true,
            allow: [],
            depConstraints: [
              {
                sourceTag: '*',
                onlyDependOnLibsWithTags: ['*'],
              },
            ],
          },
        ],
      },
    },
    {
      files: ['*.ts', '*.tsx'],
      extends: ['plugin:@nx/typescript', 'airbnb-typescript'],
      rules: {},
    },
    {
      files: ['*.js', '*.jsx'],
      extends: ['plugin:@nx/javascript'],
      rules: {},
    },
    {
      files: ['*.spec.ts', '*.spec.tsx', '*.spec.js', '*.spec.jsx'],
      env: {
        jest: true,
      },
      rules: {},
    },
  ],
};
```

## cspell

코드 작성 중에 오타를 입력하게 되는 경우를 체크하기 위해 [`cspell`](https://cspell.org/docs/getting-started/)을 설정하였다.
```bash
yarn add -D cspell
```

ignore할 단어들을 정의하기위한 설정파일을 추가한다.
```yaml
// cspell.config.yaml
---
$schema: https://raw.githubusercontent.com/streetsidesoftware/cspell/main/cspell.schema.json
version: '0.2'

useGitignore: true

language: en,eo,typescript,javqscript

ignoreWords:
  # styled-component
  - clsx
```

package.json에 다음과 같이 스크립트를 정의한다.
```json
"cspell": "cspell --config cspell.config.yaml \"**/*.{ts,js,tsx,jsx}\" --no-progress --show-suggestions",
```

## commitlint

커밋 메시지 정의 시의 기본적인 규칙 체크를 위한 린트 설정이다.
```bash
yarn add -D commitlint @commitlint/config-conventional
```

commit lint 설정 파일을 추가해준다.
```javascript
// .commitlintrc.js
module.exports = {
  extends: ['@commitlint/config-conventional'],
  rules: {
    'type-enum': [
      2,
      'always',
      [
        'build',
        'ci',
        'chore',
        'docs',
        'feat',
        'fix',
        'perf',
        'refactor',
        'revert',
        'style',
        'test',
        'post',
      ],
    ],
    'type-case': [2, 'always', 'lowerCase'],
    'type-empty': [2, 'never'],
    'subject-empty': [2, 'never'],
    'header-max-length': [2, 'always', 100],
  },
};
```

## lint-staged

- lint-staged

## husky

- husky


## References

- [Using ESLint in Nx Workspaces](https://nx.dev/recipes/other/eslint)
